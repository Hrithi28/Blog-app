<%- include('partials/header') %>

    <div class="page-header">
        <h1>All Posts</h1>
        <p>Welcome to Daily.Blog. Read our latest thoughts.</p>
    </div>

    <% if (posts.length===0) { %>
        <div class="empty-state">
            <h2>No posts yet!</h2>
            <p>Be the first one to create a new post.</p>
            <a href="/posts/new" class="btn btn-primary mt-3">Create Post</a>
        </div>
        <% } else { %>
            <div class="posts-grid">
                <% posts.sort((a,b)=> new Date(b.createdAt) - new Date(a.createdAt)).forEach(post => { %>
                    <article class="post-card">
                        <div class="post-header">
                            <h2 class="post-title">
                                <%= post.title %>
                            </h2>
                            <span class="post-date">
                                <%= post.createdAt.toLocaleDateString() %>
                                    <%= post.createdAt.toLocaleTimeString() %>
                            </span>
                        </div>
                        <div class="post-content">
                            <p>
                                <%= post.content.length> 150 ? post.content.substring(0, 150) + '...' : post.content %>
                            </p>
                        </div>
                        <div class="post-actions">
                            <a href="/posts/edit/<%= post.id %>" class="btn btn-outline">Edit</a>
                            <form action="/posts/delete/<%= post.id %>" method="POST" class="inline-form"
                                onsubmit="return confirm('Are you sure you want to delete this post?');">
                                <button type="submit" class="btn btn-danger">Delete</button>
                            </form>
                        </div>
                    </article>
                    <% }) %>
            </div>
            <% } %>

                <%- include('partials/footer') %>